import{K as a}from"./_FullInternals-a5512e47.js";import{d as D,D as I,E as p,q as L,o as B,A as b,B as A,s as g}from"./index-afcb1617.js";import{_ as F}from"./_plugin-vue_export-helper-c27b6911.js";const y=c=>(b("data-v-23ffc512"),c=c(),A(),c),E={class:"index"},W=y(()=>g("div",{class:"header"},"按住【ctrl】键的同时，单击鼠标【左键】选点生成线，双击【左键】【线】生成多边形",-1)),K=y(()=>g("div",{id:"canvas"},null,-1)),M=[W,K],P=D({__name:"22-closedLine",setup(c){I(()=>{k(),S()});const l=new a.Transformer,r=new a.Layer,s=p(!1),t=p([]),o=p(""),k=()=>{const e=document.getElementById("canvas");if(!e)return;const{clientWidth:n,clientHeight:u}=e,d=new a.Stage({container:"canvas",width:n,height:u});d.add(r);const f=new a.Line({id:_(),points:[23,20,23,160,70,93,150,109,290,139,270,93],fill:"#00D2FF",stroke:"red",strokeWidth:2,closed:!0,draggable:!0});l.nodes([f]),r.add(f),r.add(l),d.on("click",h=>{if(h.evt.button===0&&s.value){const{x,y:v}=d.getRelativePointerPosition();if(o.value===""){o.value=_();const i=new a.Line({id:o.value,points:[x,v],fill:"#00D2FF",stroke:"red",strokeWidth:2,closed:!1,draggable:!0});r.add(i),t.value.push(x),t.value.push(v),i.on("dblclick",C=>{o.value!==""&&s.value&&(C.target.setAttrs({closed:!0}),s.value=!1,o.value="",t.value=[])})}else{const i=w(d,o.value);t.value.push(x),t.value.push(v),i.setAttrs({points:t.value})}return}const m=h.target;m.getType()==="Shape"?l.nodes([m]):l.nodes([])})},w=(e,n)=>e.findOne(`#${n}`),S=()=>{document.onkeydown=e=>{e.key==="Control"&&(s.value=!0)},document.onkeyup=e=>{e.key==="Control"&&(s.value=!1,o.value="",t.value=[])}},_=()=>"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var n=Math.random()*16|0,u=e==="x"?n:n&3|8;return u.toString(16)});return(e,n)=>(B(),L("div",E,M))}});const H=F(P,[["__scopeId","data-v-23ffc512"]]);export{H as default};
