import{K as i}from"./_FullInternals.8a7bf99c.js";import{_ as P}from"./plugin-vue_export-helper.21dcd24c.js";import{d as R,i as S,c as I,o as W,p as B,j as M,a as C}from"./index.1cef505c.js";const T=r=>(B("data-v-6b7ef462"),r=r(),M(),r),E={class:"index"},K=T(()=>C("div",{id:"canvas"},null,-1)),A=[K],L=R({__name:"19-wheel",setup(r){let e=null;const a=new i.Layer,l=new i.Transformer;S(()=>{x()});const x=()=>{const p=document.getElementById("canvas");if(!p)return;const{clientWidth:d,clientHeight:v}=p;e=new i.Stage({container:"canvas",width:d,height:v}),e.add(a);const w=new i.Rect({name:"rect",x:d/2-200,y:v/2-100,width:200,height:100,fill:"#ff8800",stroke:"black",strokeWidth:1,draggable:!0});a.add(w);const b=new i.Rect({name:"rect",x:d/2+100,y:v/2,width:200,height:100,fill:"#ff00ff",stroke:"black",strokeWidth:1,draggable:!0});a.add(b);const n=new i.Rect({fill:"rgba(0,0,255,0.1)",visible:!1,stroke:"rgba(0,0,255,0.5)",strokeWidth:1});a.add(n),a.add(l),e.on("click tap",s=>{const t=s.target;t.getType()==="Shape"?l.nodes([t]):l.nodes([])});let m=0,g=0,h=0,f=0;e.on("mousedown touchstart",s=>{if(s.target!==e)return;s.evt.preventDefault();const{x:t,y:o}=e.getRelativePointerPosition();m=t,h=t,g=o,f=o,n.visible(!0),n.width(0),n.height(0)}),e.on("mousemove touchmove",s=>{if(!n.visible())return;const{x:t,y:o}=e==null?void 0:e.getRelativePointerPosition();h=t,f=o,n.setAttrs({x:Math.min(m,h),y:Math.min(g,f),width:Math.abs(m-h),height:Math.abs(g-f)})}),e.on("mouseup touchend",s=>{if(!e||!n.visible())return;setTimeout(()=>{n.visible(!1)});const t=e.find(".rect"),o=n.getClientRect();let _=t.filter(c=>i.Util.haveIntersection(o,c.getClientRect()));l.nodes(_)});const y=1.1;e.on("wheel",s=>{if(!e)return;const t=e.scaleX(),o=e.getPointerPosition(),_={x:(o.x-e.x())/t,y:(o.y-e.y())/t};let c=s.evt.deltaY>0?-1:1;s.evt.ctrlKey&&(c=-c);const u=c>0?t*y:t/y;e.scale({x:u,y:u});const k={x:o.x-_.x*u,y:o.y-_.y*u};e.position(k)})};return(p,d)=>(W(),I("div",E,A))}});var H=P(L,[["__scopeId","data-v-6b7ef462"]]);export{H as default};
