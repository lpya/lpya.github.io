import{K as i}from"./_FullInternals-b1d87c82.js";import{d as P,j as R,c as S,o as I,p as W,i as B,a as M}from"./index-c6b3677b.js";import{_ as C}from"./_plugin-vue_export-helper-c27b6911.js";const T=r=>(W("data-v-1f878bac"),r=r(),B(),r),E={class:"index"},K=T(()=>M("div",{id:"canvas"},null,-1)),A=[K],L=P({__name:"19-wheel",setup(r){let e=null;const c=new i.Layer,l=new i.Transformer;R(()=>{x()});const x=()=>{const p=document.getElementById("canvas");if(!p)return;const{clientWidth:d,clientHeight:m}=p;e=new i.Stage({container:"canvas",width:d,height:m}),e.add(c);const b=new i.Rect({name:"rect",x:d/2-200,y:m/2-100,width:200,height:100,fill:"#ff8800",stroke:"black",strokeWidth:1,draggable:!0});c.add(b);const w=new i.Rect({name:"rect",x:d/2+100,y:m/2,width:200,height:100,fill:"#ff00ff",stroke:"black",strokeWidth:1,draggable:!0});c.add(w);const n=new i.Rect({fill:"rgba(0,0,255,0.1)",visible:!1,stroke:"rgba(0,0,255,0.5)",strokeWidth:1});c.add(n),c.add(l),e.on("click tap",s=>{const t=s.target;t.getType()==="Shape"?l.nodes([t]):l.nodes([])});let v=0,g=0,h=0,f=0;e.on("mousedown touchstart",s=>{if(s.target!==e)return;s.evt.preventDefault();const{x:t,y:o}=e.getRelativePointerPosition();v=t,h=t,g=o,f=o,n.visible(!0),n.width(0),n.height(0)}),e.on("mousemove touchmove",s=>{if(!n.visible())return;const{x:t,y:o}=e==null?void 0:e.getRelativePointerPosition();h=t,f=o,n.setAttrs({x:Math.min(v,h),y:Math.min(g,f),width:Math.abs(v-h),height:Math.abs(g-f)})}),e.on("mouseup touchend",s=>{if(!e||!n.visible())return;setTimeout(()=>{n.visible(!1)});const t=e.find(".rect"),o=n.getClientRect();let _=t.filter(a=>i.Util.haveIntersection(o,a.getClientRect()));l.nodes(_)});const y=1.1;e.on("wheel",s=>{if(!e)return;const t=e.scaleX(),o=e.getPointerPosition(),_={x:(o.x-e.x())/t,y:(o.y-e.y())/t};let a=s.evt.deltaY>0?-1:1;s.evt.ctrlKey&&(a=-a);const u=a>0?t*y:t/y;e.scale({x:u,y:u});const k={x:o.x-_.x*u,y:o.y-_.y*u};e.position(k)})};return(p,d)=>(I(),S("div",E,A))}});const H=C(L,[["__scopeId","data-v-1f878bac"]]);export{H as default};
