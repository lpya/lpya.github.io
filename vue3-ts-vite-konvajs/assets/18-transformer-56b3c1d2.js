import{K as n}from"./_FullInternals-a5512e47.js";import{d as x,i as y,c as k,o as I,p as R,j as M,a as S}from"./index-c5f057bc.js";import{_ as T}from"./_plugin-vue_export-helper-c27b6911.js";const B=r=>(R("data-v-d2f7c8a4"),r=r(),M(),r),P={class:"index"},W=B(()=>S("div",{id:"canvas"},null,-1)),C=[W],E=x({__name:"18-transformer",setup(r){let e=null;const i=new n.Layer,c=new n.Transformer;y(()=>{p()});const p=()=>{const f=document.getElementById("canvas");if(!f)return;const{clientWidth:d,clientHeight:_}=f;e=new n.Stage({container:"canvas",width:d,height:_}),e.add(i);const g=new n.Rect({name:"rect",x:d/2-100,y:_/2,width:200,height:100,fill:"#ff8800",stroke:"black",strokeWidth:1,draggable:!0});i.add(g);const v=new n.Rect({name:"rect",x:d/2+100,y:_/2,width:200,height:100,fill:"#ff00ff",stroke:"black",strokeWidth:1,draggable:!0});i.add(v);const t=new n.Rect({fill:"rgba(0,0,255,0.1)",visible:!1,stroke:"rgba(0,0,255,0.5)",strokeWidth:1});i.add(t),i.add(c),e.on("click tap",s=>{const o=s.target;o.getType()==="Shape"?c.nodes([o]):c.nodes([])});let u=0,m=0,l=0,h=0;e.on("mousedown touchstart",s=>{if(s.target!==e)return;s.evt.preventDefault();const{x:o,y:a}=e.getPointerPosition();u=o,l=o,m=a,h=a,t.visible(!0),t.width(0),t.height(0)}),e.on("mousemove touchmove",s=>{if(!t.visible())return;const{x:o,y:a}=e==null?void 0:e.getPointerPosition();l=o,h=a,t.setAttrs({x:Math.min(u,l),y:Math.min(m,h),width:Math.abs(u-l),height:Math.abs(m-h)})}),e.on("mouseup touchend",s=>{if(!e||!t.visible())return;setTimeout(()=>{t.visible(!1)});const o=e.find(".rect"),a=t.getClientRect();let b=o.filter(w=>n.Util.haveIntersection(a,w.getClientRect()));c.nodes(b)})};return(f,d)=>(I(),k("div",P,C))}});const D=T(E,[["__scopeId","data-v-d2f7c8a4"]]);export{D as default};
