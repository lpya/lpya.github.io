import{d as X,r as Y,t as j,i as H,c as y,a as N,e as M,w as k,F as B,b as E,u as J,h as K,o as x,f as w,n as O,k as Q,_ as U}from"./index-ff528a90.js";const W={class:"astart"},Z={class:"header"},A={id:"canvas"},tt={class:"container"},et=X({__name:"astart",setup(nt){const o=Y({nodeList:[],startNode:{},endNode:{},pathList:[]});let g;const{nodeList:V}=j(o);H(()=>{D()});const D=()=>{C()},C=()=>{o.nodeList=[];for(let t=0;t<80;t++){o.nodeList[t]=[];for(let e=0;e<50;e++)o.nodeList[t][e]={x:t,y:e,type:0,g:1,h:0,f:0,parent:null}}},F=()=>{clearInterval(g),C();let t=0;const e=[];do{let d=Math.round(Math.random()*79),n=Math.round(Math.random()*49),c={x:d,y:n,type:0,g:1,h:0,f:0,parent:null},f=!1;for(const h of e)if(c.x===h.x&&c.y===h.y){f=!0;break}f||(c.type=1,o.nodeList[d][n]=c,t++)}while(t<1e3);P()},P=()=>{for(let t=0;t<2;t++){let e=Math.round(Math.random()*79),d=Math.round(Math.random()*49),n=2,c=o.nodeList[e][d];t===0?(n=2,o.startNode=c):(n=3,o.endNode=c),o.nodeList[e][d].type=n}},R=()=>{S(o.startNode,o.endNode,o.nodeList)},S=(t,e,d)=>{const n=[],c=[];n.push(t);const f=()=>{let s=n[0],l=0;for(let a=1;a<n.length;a++)n[a].f<s.f&&(s=n[a],l=a);if(n.splice(l,1),c.push(s),s.x===e.x&&s.y===e.y){clearInterval(g),$(h(s));return}const r=T(s,d);for(let a=0;a<r.length;a++){const i=r[a];if(c.includes(i))continue;const v=s.g+I(s,i);(!n.includes(i)||v<i.g)&&(i.h=I(s,e),i.f=i.g+i.h,i.parent=s,n.includes(i)||n.push(i))}};clearInterval(g),g=setInterval(()=>{f()},20);function h(s){const l=[];let r=s;for(;r.parent!==null;)l.unshift({x:r.x,y:r.y}),r.parent?r=r.parent:r.parent=null;return l}function T(s,l){const r=[],{x:a,y:i}=s,v=[[-1,0],[1,0],[0,-1],[0,1]];for(let L=0;L<v.length;L++){const[p,_]=v[L],b=a+p,m=i+_;if(b>=0&&b<l.length&&m>=0&&m<l[0].length){const u=l[b][m];(u.type===0||u.type===3)&&((p===-1&&_===-1||p===-1&&_===1||p===1&&_===-1||p===1&&_===1)&&(u.g=2),r.push(u)),u.type!==1&&u.type!==2&&u.type!==3&&(o.nodeList[b][m].type=5)}}return r}function I(s,l){const r=Math.abs(s.x-l.x),a=Math.abs(s.y-l.y);return Math.sqrt(r*r+a*a)}},$=t=>{t.forEach(e=>{(e.x!==o.endNode.x||e.y!==o.endNode.y)&&(o.nodeList[e.x][e.y].type=4)})},q=t=>t===0?"normal":t===1?"darriers":t===2?"start":t===3?"end":t===4?"path":"visited",z=Q(),G=()=>{z.push("/")};return(t,e)=>{const d=K("el-button");return x(),y("div",W,[N("div",Z,[M(d,{onClick:G},{default:k(()=>[w("返回")]),_:1}),M(d,{type:"primary",onClick:F},{default:k(()=>[w("生成障碍物")]),_:1}),M(d,{type:"warning",onClick:R},{default:k(()=>[w("开始")]),_:1})]),N("div",A,[N("div",tt,[(x(!0),y(B,null,E(J(V),(n,c)=>(x(),y("div",{key:`item${c}`,class:"item"},[(x(!0),y(B,null,E(n,(f,h)=>(x(),y("div",{key:`box${h}`,class:O(["box",q(f.type)])},null,2))),128))]))),128))])])])}}});const ot=U(et,[["__scopeId","data-v-b455f38f"]]);export{ot as default};
