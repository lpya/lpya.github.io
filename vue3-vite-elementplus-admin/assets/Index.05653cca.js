import{g as j}from"./article.882378d8.js";import{d as $,D as d,r,ah as L,o as m,i as G,y as o,e,w as s,ai as M,b as T,s as h,t as C,aj as b,I as w}from"./vendor.08be0fb9.js";const U={class:"complex-table"},q={class:"container"},H={class:"complex-header"},J={class:"complex-header-action"},K=o("span",null,"\u6DFB\u52A0",-1),O=o("span",null,"\u5220\u9664",-1),Q=o("span",null,"\u5BFC\u51FA",-1),R={class:"complex-header-input"},W={class:"complex-content"},X=h("\u7F16\u8F91"),Y=h("\u5220\u9664"),Z={class:"complex-content-paging"},se=$({setup(ee){const i=d([]),g=d(!0),p=d(1),v=d(15),f=d([]),y=d(!1),_=async()=>{g.value=!0;const a=await j({page:p.value,limit:v.value}),{code:t,data:u}=a.data;t===1e4&&(i.value=u.items),g.value=!1},F=a=>{i.value=i.value.filter(t=>t.id!==a),b.success({title:"\u6E29\u99A8\u63D0\u793A",message:"\u5220\u9664\u6210\u529F",showClose:!0})},x=()=>{if(f.value.length===0)return w.warning("\u8BF7\u9009\u62E9\u6587\u7AE0"),!1;f.value.forEach(a=>{i.value=i.value.filter(t=>t.id!==a)}),b.success({title:"\u6E29\u99A8\u63D0\u793A",message:"\u5220\u9664\u6210\u529F",showClose:!0})},z=a=>{i.value.forEach(t=>{t.id===a&&(t.status=t.status==="draft"?"published":"draft",w.success("\u64CD\u4F5C\u6210\u529F"))})},B=()=>{p.value=1,_()},A=a=>{const t=[];a.forEach(u=>{t.push(u.id)}),f.value=t},E=a=>{v.value=a,_()},k=a=>{p.value=a,_()};return _(),(a,t)=>{const u=r("el-icon"),c=r("el-button"),D=r("el-input"),n=r("el-table-column"),S=r("el-tag"),I=r("el-table"),N=r("el-pagination"),P=L("loading");return m(),G("div",U,[o("div",q,[o("div",H,[o("div",J,[e(c,{type:"info",size:"small",onClick:B},{default:s(()=>[e(u,{class:"iconfont icon-sync"})]),_:1}),e(c,{type:"primary",size:"small",onClick:t[0]||(t[0]=l=>y.value=!0)},{default:s(()=>[e(u,{class:"iconfont icon-plus"}),K]),_:1}),e(c,{type:"danger",size:"small",onClick:x},{default:s(()=>[e(u,{class:"iconfont icon-delete"}),O]),_:1}),e(c,{type:"info",size:"small"},{default:s(()=>[e(u,{class:"iconfont icon-upload"}),Q]),_:1})]),o("div",R,[e(D,{size:"small",placeholder:"\u8BF7\u8F93\u5165\u6807\u9898",style:{width:"400px"}})])]),o("div",W,[M((m(),T(I,{class:"complex-content-table",data:i.value,onSelectionChange:A,stripe:!0,height:"calc(100vh - 250px)"},{default:s(()=>[e(n,{type:"selection",width:"55",align:"center"}),e(n,{prop:"id",label:"\u6587\u7AE0ID",width:"80",align:"center"}),e(n,{prop:"created_at",label:"\u521B\u5EFA\u65F6\u95F4",width:"200",align:"center"}),e(n,{prop:"title",label:"\u6807\u9898",align:"center"}),e(n,{prop:"author",label:"\u4F5C\u8005",width:"100",align:"center"}),e(n,{prop:"pageviews",label:"\u9605\u8BFB\u91CF",width:"100",align:"center"}),e(n,{prop:"type",label:"\u7C7B\u522B",width:"100",align:"center"}),e(n,{prop:"status",label:"\u72B6\u6001",width:"100",align:"center"},{default:s(l=>[e(S,{type:l.row.status==="published"?"success":"info"},{default:s(()=>[h(C(l.row.status),1)]),_:2},1032,["type"])]),_:1}),e(n,{label:"\u64CD\u4F5C",width:"250",align:"center"},{default:s(l=>[e(c,{size:"small",type:"primary"},{default:s(()=>[X]),_:1}),e(c,{size:"small",onClick:V=>z(l.row.id),type:l.row.status==="published"?"":"success"},{default:s(()=>[h(C(l.row.status==="published"?"\u8349\u7A3F":"\u53D1\u5E03"),1)]),_:2},1032,["onClick","type"]),e(c,{size:"small",type:"danger",onClick:V=>F(l.row.id)},{default:s(()=>[Y]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])),[[P,g.value]]),o("div",Z,[e(N,{background:"",currentPage:p.value,"onUpdate:currentPage":t[1]||(t[1]=l=>p.value=l),"page-size":v.value,"page-sizes":[15,30,45,60],layout:"sizes, prev, pager, next",total:100,onSizeChange:E,onCurrentChange:k},null,8,["currentPage","page-size"])])])])])}}});export{se as default};
