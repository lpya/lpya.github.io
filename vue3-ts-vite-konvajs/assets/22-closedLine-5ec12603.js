import{d as D,D as I,K as c,E as p,o as L,s as b,v as d,f as B,B as F,C as W}from"./index-372df34c.js";import{_ as A}from"./_plugin-vue_export-helper-c27b6911.js";const m=()=>"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(s){const t=Math.random()*16|0;return(s==="x"?t:t&3|8).toString(16)}),_=s=>(F("data-v-930c7329"),s=s(),W(),s),E={class:"index"},K={class:"header"},M=_(()=>d("span",null,"按住",-1)),P=_(()=>d("span",null," 键的同时，单击鼠标【左键】选点生成线，【左键】双击【线】生成多边形",-1)),T=_(()=>d("div",{id:"canvas"},null,-1)),U=D({__name:"22-closedLine",setup(s){I(()=>{y(),w()});const t=new c.Transformer,l=new c.Layer,a=p(!1),n=p([]),o=p(""),y=()=>{const e=document.getElementById("canvas");if(!e)return;const{clientWidth:i,clientHeight:S}=e,r=new c.Stage({container:"canvas",width:i,height:S});r.add(l);const f=new c.Line({id:m(),points:[23,20,23,160,70,93,150,109,290,139,270,93],fill:"#00D2FF",stroke:"red",strokeWidth:2,closed:!0,draggable:!0});t.nodes([f]),l.add(f),l.add(t),r.on("click",h=>{if(h.evt.button===0&&a.value){const{x,y:v}=r.getRelativePointerPosition();if(o.value===""){o.value=m();const u=new c.Line({id:o.value,points:[x,v],fill:"#00D2FF",stroke:"red",strokeWidth:2,closed:!1,draggable:!0});l.add(u),n.value.push(x),n.value.push(v),u.on("dblclick",C=>{o.value!==""&&a.value&&(C.target.setAttrs({closed:!0}),a.value=!1,o.value="",n.value=[])})}else{const u=k(r,o.value);n.value.push(x),n.value.push(v),u.setAttrs({points:n.value})}return}const g=h.target;g.getType()==="Shape"?t.nodes([g]):t.nodes([])})},k=(e,i)=>e.findOne(`#${i}`),w=()=>{document.onkeydown=e=>{e.key==="Control"&&(a.value=!0)},document.onkeyup=e=>{e.key==="Control"&&(a.value=!1,o.value="",n.value=[])}};return(e,i)=>(L(),b("div",E,[d("div",K,[M,d("span",{style:B({color:`${a.value?"red":"#000"}`,fontWeight:"bold"})},"【ctrl】",4),P]),T]))}});const H=A(U,[["__scopeId","data-v-930c7329"]]);export{H as default};
