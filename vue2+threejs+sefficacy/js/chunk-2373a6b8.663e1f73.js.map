{"version":3,"sources":["webpack:///./src/views/PointCloudCube.vue","webpack:///src/views/PointCloudCube.vue","webpack:///./src/views/PointCloudCube.vue?8978","webpack:///./src/views/PointCloudCube.vue?51e7","webpack:///./src/views/PointCloudCube.vue?d92c","webpack:///./node_modules/_three@0.149.0@three/examples/jsm/libs/stats.module.js"],"names":["render","_vm","this","_c","_self","attrs","staticRenderFns","data","scene","camera","renderer","stats","pointsCloud","bufferGeometry","positions","colors","num","timer","mounted","methods","init","initScene","initCamera","window","initRenderer","antialias","el","initOrbitControls","controls","initAxesHelper","initCube","size","vertexColors","initCubeData","clearInterval","initStats","requestAnimationFrame","component","Stats","mode","container","document","createElement","addPanel","panel","appendChild","dom","showPanel","id","i","children","length","style","display","cssText","addEventListener","event","preventDefault","beginTime","performance","Date","now","prevTime","frames","fpsPanel","Panel","msPanel","self","memory","memPanel","REVISION","begin","end","time","update","usedJSHeapSize","jsHeapSizeLimit","domElement","setMode","name","fg","bg","min","Infinity","max","round","Math","PR","devicePixelRatio","WIDTH","HEIGHT","TEXT_X","TEXT_Y","GRAPH_X","GRAPH_Y","GRAPH_WIDTH","GRAPH_HEIGHT","canvas","width","height","context","getContext","font","textBaseline","fillStyle","fillRect","fillText","globalAlpha","value","maxValue","drawImage"],"mappings":"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","file":"js/chunk-2373a6b8.663e1f73.js","sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{attrs:{\"id\":\"container\"}})\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div id=\"container\"></div>\r\n</template>\r\n<script>\r\nimport * as THREE from 'three';\r\nimport Stats from 'three/examples/jsm/libs/stats.module.js';\r\nimport { OrbitControls } from 'three/examples/jsm/controls/OrbitControls';\r\nexport default {\r\n  data() {\r\n    return {\r\n      scene: null,\r\n      camera: null,\r\n      renderer: null,\r\n      stats: null,\r\n      pointsCloud: null,\r\n      bufferGeometry: null,\r\n      positions: [],\r\n      colors: [],\r\n      num: 0,\r\n      timer: null\r\n    };\r\n  },\r\n  mounted() {\r\n    this.init();\r\n  },\r\n  methods: {\r\n    // 初始化\r\n    init() {\r\n      const el = document.getElementById('container');\r\n      this.initScene();\r\n      this.initCamera();\r\n      this.initRenderer(el);\r\n      this.initOrbitControls();\r\n      this.initAxesHelper();\r\n      this.initCube();\r\n      this.initStats(el);\r\n      this.render();\r\n    },\r\n    // 场景\r\n    initScene() {\r\n      this.scene = new THREE.Scene();\r\n      this.scene.background = new THREE.Color(0x000000);\r\n    },\r\n    // 相机\r\n    initCamera() {\r\n      this.camera = new THREE.PerspectiveCamera(\r\n        45,\r\n        window.innerWidth / window.innerHeight,\r\n        1,\r\n        5000\r\n      );\r\n      this.camera.position.set(1000, 0, -2000);\r\n    },\r\n    // 渲染器\r\n    initRenderer(el) {\r\n      this.renderer = new THREE.WebGLRenderer({\r\n        antialias: true\r\n      });\r\n      this.renderer.setClearColor(0xeeeeee, 1.0);\r\n      this.renderer.setSize(window.innerWidth, window.innerHeight);\r\n      el.appendChild(this.renderer.domElement);\r\n    },\r\n    // 缩放\r\n    initOrbitControls() {\r\n      let controls = new OrbitControls(this.camera, this.renderer.domElement);\r\n      controls.addEventListener('change', this.render);\r\n    },\r\n    // 坐标轴\r\n    initAxesHelper() {\r\n      const axes = new THREE.AxesHelper(2000);\r\n      this.scene.add(axes);\r\n    },\r\n    // 正方体\r\n    initCube() {\r\n      const material = new THREE.PointsMaterial({\r\n        size: 1,\r\n        vertexColors: true\r\n      });\r\n      this.bufferGeometry = new THREE.BufferGeometry();\r\n      this.pointsCloud = new THREE.Points();\r\n      this.pointsCloud.material = material;\r\n      this.scene.add(this.pointsCloud);\r\n      this.timer = setInterval(() => {\r\n        this.initCubeData();\r\n      }, 1);\r\n    },\r\n    initCubeData() {\r\n      if (this.num > 1000000) {\r\n        clearInterval(this.timer);\r\n        return;\r\n      }\r\n      this.num = this.num + 1;\r\n      const n = 1000;\r\n      const n2 = n / 2;\r\n      let x = Math.random() * n - n2;\r\n      let y = Math.random() * n - n2;\r\n      let z = Math.random() * n - n2;\r\n      let vx = x / n + 0.5;\r\n      let vy = y / n + 0.5;\r\n      let vz = z / n + 0.5;\r\n      this.colors.push(vx, vy, vz);\r\n      this.positions.push(x, y, z);\r\n      this.bufferGeometry.setAttribute(\r\n        'position',\r\n        new THREE.Float32BufferAttribute(this.positions, 3)\r\n      );\r\n      this.bufferGeometry.setAttribute(\r\n        'color',\r\n        new THREE.Float32BufferAttribute(this.colors, 3)\r\n      );\r\n      this.pointsCloud.geometry = this.bufferGeometry;\r\n      this.render();\r\n    },\r\n    // 性能\r\n    initStats(el) {\r\n      this.stats = new Stats();\r\n      el.appendChild(this.stats.dom);\r\n      this.requestAnimationFrame();\r\n    },\r\n    requestAnimationFrame() {\r\n      this.stats.update();\r\n      requestAnimationFrame(this.requestAnimationFrame);\r\n    },\r\n    // 渲染\r\n    render() {\r\n      this.renderer.render(this.scene, this.camera);\r\n    }\r\n  }\r\n};\r\n</script>\r\n<style>\r\n* {\r\n  padding: 0px;\r\n  margin: 0px;\r\n}\r\n</style>\r\n","import mod from \"-!../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--13-0!../../node_modules/_thread-loader@2.1.3@thread-loader/dist/cjs.js!../../node_modules/_babel-loader@8.3.0@babel-loader/lib/index.js!../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--1-0!../../node_modules/_vue-loader@15.10.1@vue-loader/lib/index.js??vue-loader-options!./PointCloudCube.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--13-0!../../node_modules/_thread-loader@2.1.3@thread-loader/dist/cjs.js!../../node_modules/_babel-loader@8.3.0@babel-loader/lib/index.js!../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--1-0!../../node_modules/_vue-loader@15.10.1@vue-loader/lib/index.js??vue-loader-options!./PointCloudCube.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./PointCloudCube.vue?vue&type=template&id=f5ce2e64&\"\nimport script from \"./PointCloudCube.vue?vue&type=script&lang=js&\"\nexport * from \"./PointCloudCube.vue?vue&type=script&lang=js&\"\nimport style0 from \"./PointCloudCube.vue?vue&type=style&index=0&id=f5ce2e64&prod&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/_vue-loader@15.10.1@vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","export * from \"-!../../node_modules/_mini-css-extract-plugin@0.9.0@mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../node_modules/_css-loader@3.6.0@css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../node_modules/_vue-loader@15.10.1@vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/_postcss-loader@3.0.0@postcss-loader/src/index.js??ref--7-oneOf-1-2!../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--1-0!../../node_modules/_vue-loader@15.10.1@vue-loader/lib/index.js??vue-loader-options!./PointCloudCube.vue?vue&type=style&index=0&id=f5ce2e64&prod&lang=css&\"","var Stats = function () {\n\n\tvar mode = 0;\n\n\tvar container = document.createElement( 'div' );\n\tcontainer.style.cssText = 'position:fixed;top:0;left:0;cursor:pointer;opacity:0.9;z-index:10000';\n\tcontainer.addEventListener( 'click', function ( event ) {\n\n\t\tevent.preventDefault();\n\t\tshowPanel( ++ mode % container.children.length );\n\n\t}, false );\n\n\t//\n\n\tfunction addPanel( panel ) {\n\n\t\tcontainer.appendChild( panel.dom );\n\t\treturn panel;\n\n\t}\n\n\tfunction showPanel( id ) {\n\n\t\tfor ( var i = 0; i < container.children.length; i ++ ) {\n\n\t\t\tcontainer.children[ i ].style.display = i === id ? 'block' : 'none';\n\n\t\t}\n\n\t\tmode = id;\n\n\t}\n\n\t//\n\n\tvar beginTime = ( performance || Date ).now(), prevTime = beginTime, frames = 0;\n\n\tvar fpsPanel = addPanel( new Stats.Panel( 'FPS', '#0ff', '#002' ) );\n\tvar msPanel = addPanel( new Stats.Panel( 'MS', '#0f0', '#020' ) );\n\n\tif ( self.performance && self.performance.memory ) {\n\n\t\tvar memPanel = addPanel( new Stats.Panel( 'MB', '#f08', '#201' ) );\n\n\t}\n\n\tshowPanel( 0 );\n\n\treturn {\n\n\t\tREVISION: 16,\n\n\t\tdom: container,\n\n\t\taddPanel: addPanel,\n\t\tshowPanel: showPanel,\n\n\t\tbegin: function () {\n\n\t\t\tbeginTime = ( performance || Date ).now();\n\n\t\t},\n\n\t\tend: function () {\n\n\t\t\tframes ++;\n\n\t\t\tvar time = ( performance || Date ).now();\n\n\t\t\tmsPanel.update( time - beginTime, 200 );\n\n\t\t\tif ( time >= prevTime + 1000 ) {\n\n\t\t\t\tfpsPanel.update( ( frames * 1000 ) / ( time - prevTime ), 100 );\n\n\t\t\t\tprevTime = time;\n\t\t\t\tframes = 0;\n\n\t\t\t\tif ( memPanel ) {\n\n\t\t\t\t\tvar memory = performance.memory;\n\t\t\t\t\tmemPanel.update( memory.usedJSHeapSize / 1048576, memory.jsHeapSizeLimit / 1048576 );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\treturn time;\n\n\t\t},\n\n\t\tupdate: function () {\n\n\t\t\tbeginTime = this.end();\n\n\t\t},\n\n\t\t// Backwards Compatibility\n\n\t\tdomElement: container,\n\t\tsetMode: showPanel\n\n\t};\n\n};\n\nStats.Panel = function ( name, fg, bg ) {\n\n\tvar min = Infinity, max = 0, round = Math.round;\n\tvar PR = round( window.devicePixelRatio || 1 );\n\n\tvar WIDTH = 80 * PR, HEIGHT = 48 * PR,\n\t\tTEXT_X = 3 * PR, TEXT_Y = 2 * PR,\n\t\tGRAPH_X = 3 * PR, GRAPH_Y = 15 * PR,\n\t\tGRAPH_WIDTH = 74 * PR, GRAPH_HEIGHT = 30 * PR;\n\n\tvar canvas = document.createElement( 'canvas' );\n\tcanvas.width = WIDTH;\n\tcanvas.height = HEIGHT;\n\tcanvas.style.cssText = 'width:80px;height:48px';\n\n\tvar context = canvas.getContext( '2d' );\n\tcontext.font = 'bold ' + ( 9 * PR ) + 'px Helvetica,Arial,sans-serif';\n\tcontext.textBaseline = 'top';\n\n\tcontext.fillStyle = bg;\n\tcontext.fillRect( 0, 0, WIDTH, HEIGHT );\n\n\tcontext.fillStyle = fg;\n\tcontext.fillText( name, TEXT_X, TEXT_Y );\n\tcontext.fillRect( GRAPH_X, GRAPH_Y, GRAPH_WIDTH, GRAPH_HEIGHT );\n\n\tcontext.fillStyle = bg;\n\tcontext.globalAlpha = 0.9;\n\tcontext.fillRect( GRAPH_X, GRAPH_Y, GRAPH_WIDTH, GRAPH_HEIGHT );\n\n\treturn {\n\n\t\tdom: canvas,\n\n\t\tupdate: function ( value, maxValue ) {\n\n\t\t\tmin = Math.min( min, value );\n\t\t\tmax = Math.max( max, value );\n\n\t\t\tcontext.fillStyle = bg;\n\t\t\tcontext.globalAlpha = 1;\n\t\t\tcontext.fillRect( 0, 0, WIDTH, GRAPH_Y );\n\t\t\tcontext.fillStyle = fg;\n\t\t\tcontext.fillText( round( value ) + ' ' + name + ' (' + round( min ) + '-' + round( max ) + ')', TEXT_X, TEXT_Y );\n\n\t\t\tcontext.drawImage( canvas, GRAPH_X + PR, GRAPH_Y, GRAPH_WIDTH - PR, GRAPH_HEIGHT, GRAPH_X, GRAPH_Y, GRAPH_WIDTH - PR, GRAPH_HEIGHT );\n\n\t\t\tcontext.fillRect( GRAPH_X + GRAPH_WIDTH - PR, GRAPH_Y, PR, GRAPH_HEIGHT );\n\n\t\t\tcontext.fillStyle = bg;\n\t\t\tcontext.globalAlpha = 0.9;\n\t\t\tcontext.fillRect( GRAPH_X + GRAPH_WIDTH - PR, GRAPH_Y, PR, round( ( 1 - ( value / maxValue ) ) * GRAPH_HEIGHT ) );\n\n\t\t}\n\n\t};\n\n};\n\nexport default Stats;\n"],"sourceRoot":""}