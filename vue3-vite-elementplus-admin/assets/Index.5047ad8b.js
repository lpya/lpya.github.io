import{g as j}from"./article.882378d8.js";import{d as L,a6 as d,r,ae as G,o as m,i as M,y as n,e,w as s,af as P,b as T,s as _,t as C,ag as b,E as w}from"./vendor.f3067333.js";const q={class:"complex-table"},H={class:"container"},J={class:"complex-header"},K={class:"complex-header-action"},O=n("span",null,"\u6DFB\u52A0",-1),Q=n("span",null,"\u5220\u9664",-1),R=n("span",null,"\u5BFC\u51FA",-1),U={class:"complex-header-input"},W={class:"complex-content"},X=_("\u7F16\u8F91"),Y=_("\u5220\u9664"),Z={class:"complex-content-paging"},se=L({setup(ee){const i=d([]),h=d(!0),g=d(1),v=d(15),f=d([]),y=d(!1),p=async()=>{h.value=!0;const a=await j({page:g.value,limit:v.value}),{code:t,data:o}=a.data;t===1e4&&(i.value=o.items),h.value=!1},F=a=>{i.value=i.value.filter(t=>t.id!==a),b.success({title:"\u6E29\u99A8\u63D0\u793A",message:"\u5220\u9664\u6210\u529F",showClose:!0})},x=()=>{if(f.value.length===0)return w.warning("\u8BF7\u9009\u62E9\u6587\u7AE0"),!1;f.value.forEach(a=>{i.value=i.value.filter(t=>t.id!==a)}),b.success({title:"\u6E29\u99A8\u63D0\u793A",message:"\u5220\u9664\u6210\u529F",showClose:!0})},z=a=>{i.value.forEach(t=>{t.id===a&&(t.status=t.status==="draft"?"published":"draft",w.success("\u64CD\u4F5C\u6210\u529F"))})},B=()=>{g.value=1,p()},E=a=>{const t=[];a.forEach(o=>{t.push(o.id)}),f.value=t},A=a=>{v.value=a,p()},k=a=>{g.value=a,p()};return p(),(a,t)=>{const o=r("el-icon"),c=r("el-button"),D=r("el-input"),l=r("el-table-column"),S=r("el-tag"),N=r("el-table"),V=r("el-pagination"),I=G("loading");return m(),M("div",q,[n("div",H,[n("div",J,[n("div",K,[e(c,{type:"info",size:"small",onClick:B},{default:s(()=>[e(o,{class:"iconfont icon-sync"})]),_:1}),e(c,{type:"primary",size:"small",onClick:t[0]||(t[0]=u=>y.value=!0)},{default:s(()=>[e(o,{class:"iconfont icon-plus"}),O]),_:1}),e(c,{type:"danger",size:"small",onClick:x},{default:s(()=>[e(o,{class:"iconfont icon-delete"}),Q]),_:1}),e(c,{type:"info",size:"small"},{default:s(()=>[e(o,{class:"iconfont icon-upload"}),R]),_:1})]),n("div",U,[e(D,{size:"small",placeholder:"\u8BF7\u8F93\u5165\u6807\u9898",style:{width:"400px"}})])]),n("div",W,[P((m(),T(N,{class:"complex-content-table",data:i.value,onSelectionChange:E,stripe:!0,height:"calc(100vh - 250px)"},{default:s(()=>[e(l,{type:"selection",width:"55",align:"center"}),e(l,{prop:"id",label:"\u6587\u7AE0ID",width:"80",align:"center"}),e(l,{prop:"created_at",label:"\u521B\u5EFA\u65F6\u95F4",width:"200",align:"center"}),e(l,{prop:"title",label:"\u6807\u9898",align:"center"}),e(l,{prop:"author",label:"\u4F5C\u8005",width:"100",align:"center"}),e(l,{prop:"pageviews",label:"\u9605\u8BFB\u91CF",width:"100",align:"center"}),e(l,{prop:"type",label:"\u7C7B\u522B",width:"100",align:"center"}),e(l,{prop:"status",label:"\u72B6\u6001",width:"100",align:"center"},{default:s(u=>[e(S,{type:u.row.status==="published"?"success":"info"},{default:s(()=>[_(C(u.row.status),1)]),_:2},1032,["type"])]),_:1}),e(l,{label:"\u64CD\u4F5C",width:"250",align:"center"},{default:s(u=>[e(c,{size:"small",type:"primary"},{default:s(()=>[X]),_:1}),e(c,{size:"small",onClick:$=>z(u.row.id),type:u.row.status==="published"?"":"success"},{default:s(()=>[_(C(u.row.status==="published"?"\u8349\u7A3F":"\u53D1\u5E03"),1)]),_:2},1032,["onClick","type"]),e(c,{size:"small",type:"danger",onClick:$=>F(u.row.id)},{default:s(()=>[Y]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])),[[I,h.value]]),n("div",Z,[e(V,{background:"","page-size":v.value,"page-sizes":[15,30,45,60],layout:"sizes, prev, pager, next",total:100,onSizeChange:A,onCurrentChange:k},null,8,["page-size"])])])])])}}});export{se as default};
